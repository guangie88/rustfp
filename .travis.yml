sudo: required
dist: trusty

language:
- cpp

before_install:
- sudo apt-get update -qq
- sudo apt-get install software-properties-common python-software-properties -y
- sudo add-apt-repository ppa:ubuntu-toolchain-r/test -y
- sudo apt-get update -qq
- sudo apt-get install gcc g++ gcc-5 g++-5 python libgtest-dev cmake doxygen -y
- sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-5 100
- sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-5 100
- cd /usr/src/gtest
- sudo cmake . -DBUILD_SHARED_LIBS=ON
- sudo make
- sudo mv libgtest*.so /usr/local/lib/
- sudo ldconfig
- cd "${TRAVIS_BUILD_DIR}"

script:
- mkdir build-debug
- cd build-debug
- cmake .. -DCMAKE_BUILD_TYPE=Debug
- make
- cd ..
- mkdir build-release
- cd build-release
- cmake .. -DCMAKE_BUILD_TYPE=Release
- make
- cd ..

after_success:
- doxygen Doxyfile
- ./build-debug/bin/unit_test
